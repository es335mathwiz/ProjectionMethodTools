Needs["JLink`"]; Needs["ProjectionInterface`"]; \
Get["prepPackages.mth"]; Get["applyReliable.mth"];


lucaSubs = {betap -> 99/100, phip -> 1, rhop -> 1/2, sigmap -> 1, 
  rUnderBar -> 2/100, qLow -> -.5, qHigh -> .5, 
  ruLow -> -4*sigma$u/(1 - rho$ru), ruHigh ->  4*sigma$u/(1 - rho$ru),
   integOrder -> {50}, sigma$u -> 0.01, theMean -> {0}, rho$ru -> 0.5,
   adj -> 1}; lucaReliableEqns = genSys[1];
(*rr[t]-eqvdIf[lambda[t]\[GreaterEqual]0,rUnderBar,phip*qq[t]] should \
fix codesubs*)
newWeightedStochasticBasis[lucaMod01, lucaReliableEqns];
Profile[Timing[{{stateVar, nonStateVar, theShock}, modEqns01} = 
    GenerateModelCode[lucaMod01];]]
modEqns01[updateParams[modParams]]
