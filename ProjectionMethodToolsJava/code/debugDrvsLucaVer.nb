(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 9.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       157,          7]
NotebookDataLength[     61525,       1441]
NotebookOptionsPosition[     55532,       1331]
NotebookOutlinePosition[     56101,       1352]
CellTagsIndexPosition[     56058,       1349]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Debug Derivatives", "Title",
 CellChangeTimes->{{3.617200550708066*^9, 
  3.6172005561887484`*^9}},ExpressionUUID->"eab0a283-689f-4ffc-aa2c-\
4cf6556ff19c"],

Cell["Gary S. Anderson", "Author",
 CellChangeTimes->{{3.6172005766837215`*^9, 
  3.617200602415076*^9}},ExpressionUUID->"bf4025e3-eaa9-4320-8119-\
7b6a6b36ccab"],

Cell[CellGroupData[{

Cell["Debug using Luca\[CloseCurlyQuote]s Financial Market Model", "Section",
 CellChangeTimes->{{3.6172006065601263`*^9, 3.6172006252849464`*^9}, {
  3.6172009262594585`*^9, 
  3.6172009635524197`*^9}},ExpressionUUID->"cb61628e-9d45-4cfb-bfe8-\
f155fd4955ce"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"PrependTo", "[", 
   RowBox[{"$Path", ",", "\"\<~/git/ProtectedSymbols\>\""}], "]"}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"$OperatingSystem", "===", "\"\<Windows\>\""}], ",", "\n", 
    RowBox[{
    "SetDirectory", "[", 
     "\"\<g:/git/ProjectionMethodTools/ProjectionMethodToolsJava/code\>\"", 
     "]"}], ",", "\n", 
    RowBox[{
    "SetDirectory", "[", 
     "\"\<~/git/ProjectionMethodTools/ProjectionMethodToolsJava/code\>\"", 
     "]"}]}], "]"}], ";"}]}], "Code",
 CellChangeTimes->{{3.6172006616585565`*^9, 3.617200760638857*^9}, 
   3.6172193427493825`*^9, {3.893896935352715*^9, 3.8938969473519707`*^9}, {
   3.8938969911340322`*^9, 3.893897017799405*^9}},
 CellLabel->"In[12]:=",ExpressionUUID->"12c5d088-c221-4fef-957b-e65e84f088aa"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"Get", "[", "\"\<prepPackages.mth\>\"", "]"}], 
  "\n"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"lucaEqn", "=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{"qq", "[", "t", "]"}], "-", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"betap", "*", 
         RowBox[{"(", 
          RowBox[{"1", "-", "rhop"}], ")"}], "*", 
         RowBox[{"qq", "[", 
          RowBox[{"t", "+", "1"}], "]"}]}], "+", 
        RowBox[{"rhop", "*", 
         RowBox[{"qq", "[", 
          RowBox[{"t", "-", "1"}], "]"}]}], "-", 
        RowBox[{"sigmap", "*", 
         RowBox[{"rr", "[", "t", "]"}]}], "+", 
        RowBox[{"ru", "[", "t", "]"}]}], ")"}]}], ",", 
     RowBox[{
      RowBox[{"rr", "[", "t", "]"}], "-", 
      RowBox[{"phip", "*", 
       RowBox[{"qq", "[", "t", "]"}]}]}], ",", 
     RowBox[{
      RowBox[{"ru", "[", "t", "]"}], "-", 
      RowBox[{"rho$ru", "*", 
       RowBox[{"ru", "[", 
        RowBox[{"t", "-", "1"}], "]"}]}], "-", 
      RowBox[{
       RowBox[{"eps", "[", "uu", "]"}], "[", "t", "]"}]}]}], "}"}]}], 
  "\[IndentingNewLine]", "\n"}], "\[IndentingNewLine]", 
 RowBox[{"newWeightedStochasticBasis", "[", 
  RowBox[{"lucaMod", ",", "lucaEqn"}], "]"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"stateVar", ",", "nonStateVar", ",", "theShock"}], "}"}], ",", 
      "modEqns"}], "}"}], "=", 
    RowBox[{"GenerateModelCode", "[", "lucaMod", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"lucaSubs", "=", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"betap", "\[Rule]", 
       RowBox[{"99", "/", "100"}]}], ",", 
      RowBox[{"phip", "\[Rule]", "1"}], ",", 
      RowBox[{"rhop", "\[Rule]", 
       RowBox[{"1", "/", "2"}]}], ",", 
      RowBox[{"sigmap", "\[Rule]", "1"}], ",", 
      RowBox[{"rUnderBar", "\[Rule]", 
       RowBox[{"2", "/", "100"}]}], ",", 
      RowBox[{"qLow", "\[Rule]", 
       RowBox[{"-", ".5"}]}], ",", 
      RowBox[{"qHigh", "\[Rule]", ".5"}], ",", 
      RowBox[{"ruLow", "\[Rule]", " ", 
       RowBox[{
        RowBox[{"-", "4"}], "*", 
        RowBox[{"sigma$u", "/", 
         RowBox[{"(", 
          RowBox[{"1", "-", "rho$ru"}], ")"}]}]}]}], ",", 
      RowBox[{"ruHigh", "\[Rule]", "  ", 
       RowBox[{"4", "*", 
        RowBox[{"sigma$u", "/", 
         RowBox[{"(", 
          RowBox[{"1", "-", "rho$ru"}], ")"}]}]}]}], ",", 
      RowBox[{"integOrder", "\[Rule]", 
       RowBox[{"{", "5", "}"}]}], ",", 
      RowBox[{"sigma$u", "\[Rule]", "0.02"}], ",", 
      RowBox[{"theMean", "\[Rule]", 
       RowBox[{"{", "0", "}"}]}], ",", 
      RowBox[{"rho$ru", "\[Rule]", " ", "0.5"}]}], "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"modParams", "=", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "betap", ",", "phip", ",", "rhop", ",", "sigmap", ",", " ", "rho$ru"}],
        "}"}], "//.", "lucaSubs"}], "//", "N"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\n", 
 RowBox[{
  RowBox[{"modEqns", "[", 
   RowBox[{"updateParams", "[", "modParams", "]"}], "]"}], 
  "\[IndentingNewLine]"}], "\n", 
 RowBox[{
  RowBox[{"polyRange", "=", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"ruLow", ",", "ruHigh"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"qLow", ",", "qHigh"}], "}"}]}], "}"}], "/.", "lucaSubs"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"initPower", "=", 
   RowBox[{"{", 
    RowBox[{"2", ",", "2"}], "}"}]}], ";", 
  RowBox[{"shockPower", "=", 
   RowBox[{"{", "1", "}"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.6172193957939167`*^9, 3.6172193957939167`*^9}, {
   3.6172194525584884`*^9, 3.617219453458497*^9}, 3.6172196348013105`*^9, {
   3.617223469345704*^9, 3.6172234762057734`*^9}, {3.617378650095498*^9, 
   3.6173786502090597`*^9}, {3.6173786975531683`*^9, 
   3.6173786976486588`*^9}, {3.6173797311553926`*^9, 3.617379816184729*^9}, {
   3.6173798579539824`*^9, 3.6173798781723137`*^9}, {3.617379973167391*^9, 
   3.617379992613741*^9}, {3.617380173633915*^9, 3.6173801807946568`*^9}, {
   3.617380224043084*^9, 3.617380252721751*^9}, {3.617380427378077*^9, 
   3.617380709455866*^9}, {3.617380780448409*^9, 3.617380852573468*^9}, {
   3.6173809019426947`*^9, 3.61738094029212*^9}, {3.617381096097787*^9, 
   3.6173811044769907`*^9}, {3.6173819866623983`*^9, 
   3.6173819893711433`*^9}, {3.617382160906899*^9, 3.617382182957296*^9}, {
   3.617383988326331*^9, 3.6173839890880537`*^9}},
 CellLabel->"In[14]:=",ExpressionUUID->"3f1b1c12-4b12-424a-acdc-4e24f20fe993"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"-", "rhop"}], " ", 
     RowBox[{"qq", "[", 
      RowBox[{
       RowBox[{"-", "1"}], "+", "t"}], "]"}]}], "+", 
    RowBox[{"qq", "[", "t", "]"}], "-", 
    RowBox[{"betap", " ", 
     RowBox[{"(", 
      RowBox[{"1", "-", "rhop"}], ")"}], " ", 
     RowBox[{"qq", "[", 
      RowBox[{"1", "+", "t"}], "]"}]}], "+", 
    RowBox[{"sigmap", " ", 
     RowBox[{"rr", "[", "t", "]"}]}], "-", 
    RowBox[{"ru", "[", "t", "]"}]}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"-", "phip"}], " ", 
     RowBox[{"qq", "[", "t", "]"}]}], "+", 
    RowBox[{"rr", "[", "t", "]"}]}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"-", "rho$ru"}], " ", 
     RowBox[{"ru", "[", 
      RowBox[{
       RowBox[{"-", "1"}], "+", "t"}], "]"}]}], "+", 
    RowBox[{"ru", "[", "t", "]"}], "-", 
    RowBox[{
     RowBox[{"eps", "[", "uu", "]"}], "[", "t", "]"}]}]}], "}"}]], "Output",
 CellChangeTimes->{3.617381930051594*^9, 3.617382001900516*^9, 
  3.617382217006927*^9, 3.61738375713302*^9, 3.617383994270379*^9, 
  3.617384118089086*^9, 3.617384384264619*^9, 3.8938970312412977`*^9},
 CellLabel->"Out[15]=",ExpressionUUID->"44218c3c-fee3-451a-ba07-7d11c1f540c5"],

Cell[BoxData[
 RowBox[{"newWeightedStochasticBasis", "[", 
  RowBox[{"lucaMod", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"-", "rhop"}], " ", 
       RowBox[{"qq", "[", 
        RowBox[{
         RowBox[{"-", "1"}], "+", "t"}], "]"}]}], "+", 
      RowBox[{"qq", "[", "t", "]"}], "-", 
      RowBox[{"betap", " ", 
       RowBox[{"(", 
        RowBox[{"1", "-", "rhop"}], ")"}], " ", 
       RowBox[{"qq", "[", 
        RowBox[{"1", "+", "t"}], "]"}]}], "+", 
      RowBox[{"sigmap", " ", 
       RowBox[{"rr", "[", "t", "]"}]}], "-", 
      RowBox[{"ru", "[", "t", "]"}]}], ",", 
     RowBox[{
      RowBox[{
       RowBox[{"-", "phip"}], " ", 
       RowBox[{"qq", "[", "t", "]"}]}], "+", 
      RowBox[{"rr", "[", "t", "]"}]}], ",", 
     RowBox[{
      RowBox[{
       RowBox[{"-", "rho$ru"}], " ", 
       RowBox[{"ru", "[", 
        RowBox[{
         RowBox[{"-", "1"}], "+", "t"}], "]"}]}], "+", 
      RowBox[{"ru", "[", "t", "]"}], "-", 
      RowBox[{
       RowBox[{"eps", "[", "uu", "]"}], "[", "t", "]"}]}]}], "}"}]}], 
  "]"}]], "Output",
 CellChangeTimes->{3.617381930051594*^9, 3.617382001900516*^9, 
  3.617382217006927*^9, 3.61738375713302*^9, 3.617383994270379*^9, 
  3.617384118089086*^9, 3.617384384264619*^9, 3.893897031242901*^9},
 CellLabel->"Out[16]=",ExpressionUUID->"ab0bac9a-a483-49af-ae17-02e04a9a50ff"],

Cell[BoxData[
 TemplateBox[{
  "Set", "shape", 
   "\"Lists \\!\\(\\*RowBox[{\\\"{\\\", RowBox[{RowBox[{\\\"{\\\", RowBox[{\\\
\"stateVar\\\", \\\",\\\", \\\"nonStateVar\\\", \\\",\\\", \
\\\"theShock\\\"}], \\\"}\\\"}], \\\",\\\", \\\"modEqns\\\"}], \\\"}\\\"}]\\) \
and \\!\\(\\*RowBox[{\\\"GenerateModelCode\\\", \\\"[\\\", \\\"lucaMod\\\", \
\\\"]\\\"}]\\) are not the same shape.\"", 2, 17, 1, 26387422237331852744, 
   "Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellChangeTimes->{3.893897031302021*^9},
 CellLabel->
  "During evaluation of \
In[14]:=",ExpressionUUID->"bc788afa-7367-469d-aca0-286f78c69bae"],

Cell[BoxData[
 RowBox[{"modEqns", "[", 
  RowBox[{"updateParams", "[", 
   RowBox[{"{", 
    RowBox[{"0.99`", ",", "1.`", ",", "0.5`", ",", "1.`", ",", "0.5`"}], 
    "}"}], "]"}], "]"}]], "Output",
 CellChangeTimes->{3.617381930051594*^9, 3.617382001900516*^9, 
  3.617382217006927*^9, 3.61738375713302*^9, 3.617383994270379*^9, 
  3.617384118089086*^9, 3.617384384264619*^9, 3.893897031330871*^9},
 CellLabel->"Out[20]=",ExpressionUUID->"9e446776-1e67-414c-95b5-73fec99b0047"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"stateVar", ",", "nonStateVar", ",", "theShock"}], "}"}]], "Input",
 CellLabel->"In[23]:=",ExpressionUUID->"0abc5884-09ae-46db-a778-1894bc6b3df6"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"stateVar", ",", "nonStateVar", ",", "theShock"}], "}"}]], "Output",\

 CellChangeTimes->{3.617384157284452*^9, 3.617384385150642*^9, 
  3.893897031353096*^9},
 CellLabel->"Out[23]=",ExpressionUUID->"0bbcf130-05d4-417e-bb7c-3ee7d2bf1ec9"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"lucaBasis", "=", 
    RowBox[{"GenerateBasis", "[", 
     RowBox[{"stateVar", ",", 
      RowBox[{"polyRange", "//.", "lucaSubs"}], ",", "initPower", ",", 
      "theShock", ",", 
      RowBox[{"theMean", "//.", "lucaSubs"}], ",", 
      RowBox[{
       RowBox[{"{", "sigma$u", "}"}], "//.", "lucaSubs"}], ",", 
      RowBox[{"integOrder", "//.", "lucaSubs"}], ",", "shockPower", ",", 
      "nonStateVar"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.6172193957939167`*^9, 3.6172193957939167`*^9}, {
   3.6172194525584884`*^9, 3.617219453458497*^9}, 3.6172196348013105`*^9, {
   3.61738114088337*^9, 3.6173811433844337`*^9}},
 CellLabel->"In[24]:=",ExpressionUUID->"2d866354-0db9-4ce8-a2f5-a27a9ae8079a"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"numRowsCols", "=", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"initPower", "[", 
       RowBox[{"[", "1", "]"}], "]"}], "+", "1"}], ")"}], "*", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"shockPower", "[", 
       RowBox[{"[", "1", "]"}], "]"}], "+", "1"}], ")"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"tryMat", "=", 
   RowBox[{"ArrayFlatten", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"ConstantArray", "[", 
        RowBox[{".1", ",", 
         RowBox[{"{", 
          RowBox[{"1", ",", "numRowsCols"}], "}"}]}], "]"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"ConstantArray", "[", 
        RowBox[{".2", ",", 
         RowBox[{"{", 
          RowBox[{"1", ",", "numRowsCols"}], "}"}]}], "]"}], "}"}]}], "}"}], 
    "]"}]}], ";"}], "\n"}], "Input",
 CellChangeTimes->{{3.6172253253272643`*^9, 3.6172253253272643`*^9}},
 CellLabel->"In[25]:=",ExpressionUUID->"d414e472-a84b-4016-8bf0-bde58f5c2064"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"tryMat", "=", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "0.000000000000001", ",", "0.292289373557350", ",", "0.000000000000001",
        ",", "0.000000000000000", ",", "0.000000278748869", ",", 
       "0.000000000000000", ",", "0.000000000000000", ",", 
       "0.000000000000001", ",", "0.000000000000000"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0", ",", "0", ",", "0", ",", "0", ",", "rho$ru", ",", "0", ",", "0", 
       ",", "0", ",", "0"}], "}"}]}], 
    RowBox[{"(*", 
     RowBox[{",", 
      RowBox[{"{", 
       RowBox[{
       "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", 
        "0", ",", "0"}], "}"}]}], "*)"}], "}"}], "//.", 
   "lucaSubs"}]}]], "Input",
 CellChangeTimes->{{3.6173830169560537`*^9, 3.617383047539804*^9}, {
  3.6173830805147943`*^9, 3.617383094331888*^9}, {3.617383227885277*^9, 
  3.6173832287442093`*^9}, {3.617383504671323*^9, 3.61738352608295*^9}, {
  3.617383582461611*^9, 3.617383588821967*^9}, {3.617383676757916*^9, 
  3.6173836905978203`*^9}, {3.617384223607359*^9, 3.617384256786854*^9}, {
  3.617384325117815*^9, 3.617384328405031*^9}, {3.617384372116934*^9, 
  3.617384378136228*^9}},
 CellLabel->"In[27]:=",ExpressionUUID->"5ccbe530-c384-48bb-a2a0-eb3e1b859fe8"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
    "1.`*^-15", ",", "0.29228937355735`", ",", "1.`*^-15", ",", "0.`", ",", 
     "2.78748869`*^-7", ",", "0.`", ",", "0.`", ",", "1.`*^-15", ",", "0.`"}],
     "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
    "0", ",", "0", ",", "0", ",", "0", ",", "0.5`", ",", "0", ",", "0", ",", 
     "0", ",", "0"}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{3.6173839956996317`*^9, 3.6173842615953493`*^9, 
  3.617384333909403*^9, 3.6173843856717377`*^9, 3.893897031386394*^9},
 CellLabel->"Out[27]=",ExpressionUUID->"f2ef6245-5ba0-4f26-a9bb-3bcaad5c13ab"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Dimensions", "[", "tryMat", "]"}]], "Input",
 CellChangeTimes->{{3.617384339848727*^9, 3.617384346293995*^9}},
 CellLabel->"In[28]:=",ExpressionUUID->"1aa5df00-228f-4fff-af64-184a485ec566"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"2", ",", "9"}], "}"}]], "Output",
 CellChangeTimes->{3.6173843469454317`*^9, 3.6173843860871*^9, 
  3.893897031401723*^9},
 CellLabel->"Out[28]=",ExpressionUUID->"d6561eeb-fafb-41e3-ad1f-c8c2c7e280a0"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"lucaBasis", "[", 
   RowBox[{"setAllWeights", "[", "tryMat", "]"}], "]"}], "\n"}]], "Input",
 CellChangeTimes->{{3.6172253483674946`*^9, 3.6172253483674946`*^9}},
 CellLabel->"In[29]:=",ExpressionUUID->"fd98c031-59f1-4dbf-9a11-76b5e9502810"],

Cell[BoxData[
 RowBox[{
  RowBox[{"GenerateBasis", "[", 
   RowBox[{"stateVar", ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"-", "0.16`"}], ",", "0.16`"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"-", "0.5`"}], ",", "0.5`"}], "}"}]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"2", ",", "2"}], "}"}], ",", "theShock", ",", 
    RowBox[{"{", "0", "}"}], ",", 
    RowBox[{"{", "0.02`", "}"}], ",", 
    RowBox[{"{", "5", "}"}], ",", 
    RowBox[{"{", "1", "}"}], ",", "nonStateVar"}], "]"}], "[", 
  RowBox[{"setAllWeights", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "1.`*^-15", ",", "0.29228937355735`", ",", "1.`*^-15", ",", "0.`", ",", 
       "2.78748869`*^-7", ",", "0.`", ",", "0.`", ",", "1.`*^-15", ",", 
       "0.`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0", ",", "0", ",", "0", ",", "0", ",", "0.5`", ",", "0", ",", "0", ",",
        "0", ",", "0"}], "}"}]}], "}"}], "]"}], "]"}]], "Output",
 CellChangeTimes->{
  3.6173811790207357`*^9, 3.617382218719479*^9, 3.6173837283583937`*^9, 
   3.6173837821404943`*^9, 3.617383858637351*^9, 3.6173839966251907`*^9, 
   3.617384282883235*^9, {3.617384366255289*^9, 3.617384386337944*^9}, 
   3.893897031423636*^9},
 CellLabel->"Out[29]=",ExpressionUUID->"a1c4c9de-1b2f-4a91-aba4-1d0710654a58"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Get", "[", "\"\<lucaDebugDrv.mth\>\"", "]"}]], "Code",
 InitializationCell->False,
 CellChangeTimes->{{3.6172006616585565`*^9, 3.617200760638857*^9}, 
   3.6172193427493825`*^9},
 CellLabel->"In[30]:=",ExpressionUUID->"66d2f11d-c105-4cd9-b6bd-d7d6f917ac7b"],

Cell[BoxData[
 TemplateBox[{
  "Set", "shape", 
   "\"Lists \\!\\(\\*RowBox[{\\\"{\\\", RowBox[{RowBox[{\\\"{\\\", RowBox[{\\\
\"stateVar\\\", \\\",\\\", \\\"nonStateVar\\\", \\\",\\\", \
\\\"theShock\\\"}], \\\"}\\\"}], \\\",\\\", \\\"modEqns\\\"}], \\\"}\\\"}]\\) \
and \\!\\(\\*RowBox[{\\\"GenerateModelCode\\\", \\\"[\\\", \\\"lucaMod\\\", \
\\\"]\\\"}]\\) are not the same shape.\"", 2, 30, 2, 26387422237331852744, 
   "Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellChangeTimes->{3.617384387608947*^9, 3.893897031558352*^9},
 CellLabel->
  "During evaluation of \
In[30]:=",ExpressionUUID->"d2e34052-dc05-44cf-8707-beeb12d9c104"],

Cell[BoxData[
 TemplateBox[{
  "Splice", "argx", 
   "\"\\!\\(\\*RowBox[{\\\"Splice\\\"}]\\) called with \\!\\(\\*RowBox[{\\\"3\
\\\"}]\\) arguments; 1 argument is expected.\"", 2, 30, 3, 
   26387422237331852744, "Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellChangeTimes->{3.617384387608947*^9, 3.893897031590137*^9},
 CellLabel->
  "During evaluation of \
In[30]:=",ExpressionUUID->"1eea8f06-3f78-4e1f-a2dd-303f2d472942"],

Cell[BoxData[
 RowBox[{"Splice", "[", 
  RowBox[{"\<\"modelDoEqnsCalcs.mtex\"\>", ",", "\<\"luca.tex\"\>", ",", 
   RowBox[{"PageWidth", "\[Rule]", "\[Infinity]"}]}], "]"}]], "Output",
 CellChangeTimes->{3.617378374144123*^9, 3.617381182045092*^9, 
  3.617382223997076*^9, 3.617384005233355*^9, 3.617384394900041*^9, 
  3.893897031598689*^9},
 CellLabel->"Out[30]=",ExpressionUUID->"1c5583d5-80f2-433e-85bf-fe7ef763f0ed"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"doVal", "[", 
  RowBox[{"\"\<uu$Shock\>\"", ",", 
   RowBox[{"-", "1"}], ",", "lucaBasis", ",", "tryMat"}], "]"}]], "Code",
 CellChangeTimes->{{3.617201067733345*^9, 3.6172011216772127`*^9}, {
  3.6172012149297266`*^9, 3.6172012307352047`*^9}, {3.617203970209613*^9, 
  3.617203994052092*^9}},
 CellLabel->"In[31]:=",ExpressionUUID->"7e9cc883-c0bd-48b4-a12c-ba9329d51185"],

Cell[BoxData[
 RowBox[{"doVal", "[", 
  RowBox[{"\<\"uu$Shock\"\>", ",", 
   RowBox[{"-", "1"}], ",", 
   RowBox[{"GenerateBasis", "[", 
    RowBox[{"stateVar", ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.16`"}], ",", "0.16`"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.5`"}], ",", "0.5`"}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"2", ",", "2"}], "}"}], ",", "theShock", ",", 
     RowBox[{"{", "0", "}"}], ",", 
     RowBox[{"{", "0.02`", "}"}], ",", 
     RowBox[{"{", "5", "}"}], ",", 
     RowBox[{"{", "1", "}"}], ",", "nonStateVar"}], "]"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`",
        ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`",
        ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`",
        ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`"}], "}"}]}], "}"}]}], "]"}]], "Output",
 CellChangeTimes->{
  3.617201279737127*^9, {3.617203976379737*^9, 3.617203994632104*^9}, 
   3.6172078411425905`*^9, 3.6172147884835477`*^9, {3.617214864725548*^9, 
   3.6172148709455557`*^9}, 3.617215565107541*^9, {3.617216130475407*^9, 
   3.6172161357971954`*^9}, {3.6172164187192683`*^9, 3.6172164246712685`*^9}, 
   3.6172184277066145`*^9, {3.6172185701716146`*^9, 3.6172185752416143`*^9}, 
   3.6172191779667344`*^9, 3.617219405338016*^9, {3.61737836101868*^9, 
   3.6173783744053164`*^9}, 3.617381182162176*^9, 3.617382224143536*^9, 
   3.617384005430552*^9, 3.6173841165907793`*^9, 3.6173843952323847`*^9, {
   3.8938970310823603`*^9, 3.893897031621043*^9}},
 CellLabel->"Out[31]=",ExpressionUUID->"58833243-d324-4ff7-8391-1d6950f25b0d"]
}, Open  ]],

Cell["Values match for 0 and -1", "Text",
 CellChangeTimes->{{3.6172039244286976`*^9, 3.6172039585593805`*^9}, {
  3.617204033222844*^9, 
  3.617204035052862*^9}},ExpressionUUID->"cbdc1bc0-60ba-432e-9163-\
200c118e1034"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"cmpDrvs", "[", 
   RowBox[{"\"\<qq\>\"", ",", 
    RowBox[{"-", "1"}], ",", "lucaBasis", ",", "tryMat", ",", "0.01"}], "]"}],
   "//", "Chop"}]], "Code",
 CellChangeTimes->{{3.617201067733345*^9, 3.6172011216772127`*^9}, {
   3.6172012149297266`*^9, 3.6172012307352047`*^9}, {3.6172021068579617`*^9, 
   3.6172021091682625`*^9}, {3.6172022158261304`*^9, 
   3.6172022172263126`*^9}, {3.6172034996854887`*^9, 
   3.6172035121956134`*^9}, {3.617203700695508*^9, 3.61720370290553*^9}, 
   3.617203851933243*^9, {3.617203909876404*^9, 3.6172039107864227`*^9}, {
   3.6172040074823604`*^9, 3.617204012192455*^9}},
 CellLabel->"In[32]:=",ExpressionUUID->"5bb1ffc3-c355-4280-a71b-943031f4bdb4"],

Cell[BoxData[
 RowBox[{"cmpDrvs", "[", 
  RowBox[{"\<\"qq\"\>", ",", 
   RowBox[{"-", "1"}], ",", 
   RowBox[{"GenerateBasis", "[", 
    RowBox[{"stateVar", ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.16`"}], ",", "0.16`"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.5`"}], ",", "0.5`"}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"2", ",", "2"}], "}"}], ",", "theShock", ",", 
     RowBox[{"{", "0", "}"}], ",", 
     RowBox[{"{", "0.02`", "}"}], ",", 
     RowBox[{"{", "5", "}"}], ",", 
     RowBox[{"{", "1", "}"}], ",", "nonStateVar"}], "]"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`",
        ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`",
        ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`",
        ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`"}], "}"}]}], "}"}], ",", "0.01`"}], "]"}]], "Output",\

 CellChangeTimes->{
  3.617201279737127*^9, 3.617202109478303*^9, 3.6172022178263903`*^9, 
   3.6172035130256214`*^9, 3.6172035664281588`*^9, {3.6172036964454656`*^9, 
   3.617203703415535*^9}, {3.617203836472934*^9, 3.6172038594853964`*^9}, {
   3.6172039015862384`*^9, 3.61720391219645*^9}, 3.6172040131124735`*^9, 
   3.6172078412225885`*^9, 3.6172147885435476`*^9, {3.6172148650155478`*^9, 
   3.6172148710255566`*^9}, 3.6172155651875415`*^9, {3.6172161305354047`*^9, 
   3.617216135857193*^9}, {3.6172164188092685`*^9, 3.6172164247712684`*^9}, 
   3.6172184277866144`*^9, {3.6172185702616143`*^9, 3.6172185753316145`*^9}, 
   3.6172191780367355`*^9, 3.6172194053580165`*^9, {3.617378361195201*^9, 
   3.617378374551146*^9}, 3.617381182280737*^9, 3.61738222426753*^9, 
   3.617384005607202*^9, 3.617384116730146*^9, 3.61738439546605*^9, {
   3.893897031094166*^9, 3.8938970316302843`*^9}},
 CellLabel->"Out[32]=",ExpressionUUID->"591e2f5e-deda-4742-99c0-08693a3a1a0f"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"cmpDrvs", "[", 
   RowBox[{
   "\"\<qq\>\"", ",", "1", ",", "lucaBasis", ",", "tryMat", ",", "0.01"}], 
   "]"}], "//", "Chop"}]], "Code",
 CellChangeTimes->{{3.617201067733345*^9, 3.6172011216772127`*^9}, {
   3.6172012149297266`*^9, 3.6172012307352047`*^9}, {3.6172021068579617`*^9, 
   3.6172021091682625`*^9}, {3.6172022158261304`*^9, 
   3.6172022172263126`*^9}, {3.6172034996854887`*^9, 
   3.6172035121956134`*^9}, {3.617203700695508*^9, 3.61720370290553*^9}, 
   3.617203851933243*^9, {3.617203909876404*^9, 3.6172039107864227`*^9}, {
   3.6172040074823604`*^9, 3.617204029632804*^9}, {3.617281037570498*^9, 
   3.617281038490507*^9}},
 CellLabel->"In[33]:=",ExpressionUUID->"b82fb38f-7666-40fe-a553-58b9129dc686"],

Cell[BoxData[
 RowBox[{"cmpDrvs", "[", 
  RowBox[{"\<\"qq\"\>", ",", "1", ",", 
   RowBox[{"GenerateBasis", "[", 
    RowBox[{"stateVar", ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.16`"}], ",", "0.16`"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.5`"}], ",", "0.5`"}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"2", ",", "2"}], "}"}], ",", "theShock", ",", 
     RowBox[{"{", "0", "}"}], ",", 
     RowBox[{"{", "0.02`", "}"}], ",", 
     RowBox[{"{", "5", "}"}], ",", 
     RowBox[{"{", "1", "}"}], ",", "nonStateVar"}], "]"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`",
        ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`",
        ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`",
        ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`"}], "}"}]}], "}"}], ",", "0.01`"}], "]"}]], "Output",\

 CellChangeTimes->{
  3.617201279737127*^9, 3.617202109478303*^9, 3.6172022178263903`*^9, 
   3.6172035130256214`*^9, 3.6172035664281588`*^9, {3.6172036964454656`*^9, 
   3.617203703415535*^9}, {3.617203836472934*^9, 3.6172038594853964`*^9}, {
   3.6172039015862384`*^9, 3.61720391219645*^9}, {3.6172040131124735`*^9, 
   3.6172040302828145`*^9}, 3.6172078412925873`*^9, 3.617214788593548*^9, {
   3.6172148650855474`*^9, 3.6172148710755568`*^9}, 3.617215565237542*^9, {
   3.6172161305854025`*^9, 3.617216135907191*^9}, {3.6172164188692684`*^9, 
   3.617216424821268*^9}, 3.6172184278366146`*^9, {3.6172185703316145`*^9, 
   3.617218575401614*^9}, 3.617219178096736*^9, 3.6172194053680162`*^9, 
   3.6172810611307335`*^9, {3.617378361306476*^9, 3.6173783747834578`*^9}, 
   3.6173811823997107`*^9, 3.61738222439929*^9, 3.6173840057729883`*^9, 
   3.6173841168295603`*^9, 3.617384395658806*^9, {3.893897031108437*^9, 
   3.893897031654331*^9}},
 CellLabel->"Out[33]=",ExpressionUUID->"56defa51-fbe7-4e51-a1fa-b3d1aa628eb4"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"cmpDrvs", "[", 
  RowBox[{"\"\<uu$Shock\>\"", ",", 
   RowBox[{"-", "1"}], ",", "lucaBasis", ",", "tryMat", ",", "0.01"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.617204140487922*^9, 3.6172041697312174`*^9}},
 CellLabel->"In[34]:=",ExpressionUUID->"0eed1d43-a8fa-4ad7-ab7a-e87d7c80747d"],

Cell[BoxData[
 RowBox[{"cmpDrvs", "[", 
  RowBox[{"\<\"uu$Shock\"\>", ",", 
   RowBox[{"-", "1"}], ",", 
   RowBox[{"GenerateBasis", "[", 
    RowBox[{"stateVar", ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.16`"}], ",", "0.16`"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.5`"}], ",", "0.5`"}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"2", ",", "2"}], "}"}], ",", "theShock", ",", 
     RowBox[{"{", "0", "}"}], ",", 
     RowBox[{"{", "0.02`", "}"}], ",", 
     RowBox[{"{", "5", "}"}], ",", 
     RowBox[{"{", "1", "}"}], ",", "nonStateVar"}], "]"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`",
        ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`",
        ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`",
        ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`"}], "}"}]}], "}"}], ",", "0.01`"}], "]"}]], "Output",\

 CellChangeTimes->{{3.6172041446079636`*^9, 3.617204170571226*^9}, 
   3.6172078413525867`*^9, 3.617214788643548*^9, 3.617214871175558*^9, 
   3.617215565287543*^9, 3.6172161359571886`*^9, 3.6172164248812685`*^9, 
   3.6172185754616146`*^9, 3.617219178146736*^9, 3.6173783750444193`*^9, 
   3.6173811825454884`*^9, 3.617382224534102*^9, 3.6173840059374647`*^9, 
   3.617384395861095*^9, 3.8938970316826487`*^9},
 CellLabel->"Out[34]=",ExpressionUUID->"cbf95c4e-f97f-45e0-8a1d-8701805ce373"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"cmpDrvs", "[", 
   RowBox[{
   "\"\<qq\>\"", ",", "1", ",", "lucaBasis", ",", "tryMat", ",", "0.0001"}], 
   "]"}], "//", "Chop"}]], "Code",
 CellChangeTimes->{{3.617201067733345*^9, 3.6172011216772127`*^9}, {
   3.6172012149297266`*^9, 3.6172012307352047`*^9}, {3.6172021068579617`*^9, 
   3.6172021091682625`*^9}, {3.6172022158261304`*^9, 
   3.6172022172263126`*^9}, {3.6172034996854887`*^9, 
   3.6172035121956134`*^9}, {3.617203700695508*^9, 3.61720370290553*^9}, 
   3.617203851933243*^9, {3.617203909876404*^9, 3.6172039107864227`*^9}, {
   3.6172040074823604`*^9, 3.617204029632804*^9}, {3.6172042512060375`*^9, 
   3.6172042623561487`*^9}},
 CellLabel->"In[35]:=",ExpressionUUID->"2e121b41-cafb-458f-b68f-c363a991836b"],

Cell[BoxData[
 RowBox[{"cmpDrvs", "[", 
  RowBox[{"\<\"qq\"\>", ",", "1", ",", 
   RowBox[{"GenerateBasis", "[", 
    RowBox[{"stateVar", ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.16`"}], ",", "0.16`"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.5`"}], ",", "0.5`"}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"2", ",", "2"}], "}"}], ",", "theShock", ",", 
     RowBox[{"{", "0", "}"}], ",", 
     RowBox[{"{", "0.02`", "}"}], ",", 
     RowBox[{"{", "5", "}"}], ",", 
     RowBox[{"{", "1", "}"}], ",", "nonStateVar"}], "]"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`",
        ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`",
        ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`",
        ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`"}], "}"}]}], "}"}], ",", "0.0001`"}], 
  "]"}]], "Output",
 CellChangeTimes->{
  3.617201279737127*^9, 3.617202109478303*^9, 3.6172022178263903`*^9, 
   3.6172035130256214`*^9, 3.6172035664281588`*^9, {3.6172036964454656`*^9, 
   3.617203703415535*^9}, {3.617203836472934*^9, 3.6172038594853964`*^9}, {
   3.6172039015862384`*^9, 3.61720391219645*^9}, {3.6172040131124735`*^9, 
   3.6172040302828145`*^9}, {3.6172042530360556`*^9, 3.617204263416159*^9}, 
   3.6172078414225845`*^9, 3.6172147886935477`*^9, {3.617214865145548*^9, 
   3.6172148712255583`*^9}, 3.6172155653275433`*^9, {3.6172161306254015`*^9, 
   3.617216135997187*^9}, {3.6172164189192686`*^9, 3.6172164249312687`*^9}, 
   3.6172184278766146`*^9, {3.6172185703916144`*^9, 3.617218575521614*^9}, 
   3.617219178196737*^9, 3.6172194053880167`*^9, {3.617378361439152*^9, 
   3.617378375321691*^9}, 3.617381182661684*^9, 3.6173822246749496`*^9, 
   3.617384006060379*^9, 3.617384116914839*^9, 3.6173843960663033`*^9, {
   3.893897031123515*^9, 3.893897031704173*^9}},
 CellLabel->"Out[35]=",ExpressionUUID->"7b75666c-3014-4911-ad35-9a98e812be7c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"cmpDrvs", "[", 
  RowBox[{
  "\"\<rr\>\"", ",", "1", ",", "lucaBasis", ",", "tryMat", ",", "0.0001"}], 
  "]"}]], "Code",
 CellChangeTimes->{{3.617201067733345*^9, 3.6172011216772127`*^9}, {
   3.6172012149297266`*^9, 3.6172012307352047`*^9}, {3.6172021068579617`*^9, 
   3.6172021091682625`*^9}, {3.6172022158261304`*^9, 
   3.6172022172263126`*^9}, {3.6172034996854887`*^9, 
   3.6172035121956134`*^9}, {3.617203700695508*^9, 3.61720370290553*^9}, 
   3.617203851933243*^9, {3.617203909876404*^9, 3.6172039107864227`*^9}, {
   3.6172040074823604`*^9, 3.617204029632804*^9}, {3.6172042512060375`*^9, 
   3.6172042623561487`*^9}, {3.6172078949335155`*^9, 
   3.6172078955835023`*^9}, {3.6172080829197583`*^9, 3.617208091699583*^9}, {
   3.617216103616482*^9, 3.6172161063463726`*^9}, 3.6172161559563885`*^9},
 CellLabel->"In[36]:=",ExpressionUUID->"bdfea2ee-3757-4690-b5af-b760dd64ed93"],

Cell[BoxData[
 RowBox[{"cmpDrvs", "[", 
  RowBox[{"\<\"rr\"\>", ",", "1", ",", 
   RowBox[{"GenerateBasis", "[", 
    RowBox[{"stateVar", ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.16`"}], ",", "0.16`"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.5`"}], ",", "0.5`"}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"2", ",", "2"}], "}"}], ",", "theShock", ",", 
     RowBox[{"{", "0", "}"}], ",", 
     RowBox[{"{", "0.02`", "}"}], ",", 
     RowBox[{"{", "5", "}"}], ",", 
     RowBox[{"{", "1", "}"}], ",", "nonStateVar"}], "]"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`",
        ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`",
        ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`",
        ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`"}], "}"}]}], "}"}], ",", "0.0001`"}], 
  "]"}]], "Output",
 CellChangeTimes->{
  3.6172161565663643`*^9, {3.6172164189892683`*^9, 3.6172164250512686`*^9}, 
   3.6172184279266143`*^9, {3.6172185704616146`*^9, 3.6172185756316147`*^9}, 
   3.6172191782667375`*^9, 3.6172194054080167`*^9, {3.617378361515798*^9, 
   3.617378375574479*^9}, 3.617381182838956*^9, 3.61738222482758*^9, 
   3.61738400625963*^9, 3.6173841170081387`*^9, 3.617384396341967*^9, {
   3.893897031138268*^9, 3.893897031722981*^9}},
 CellLabel->"Out[36]=",ExpressionUUID->"2794df1f-f24a-4ba1-a07b-5f6390ed41c7"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"doDrv", "[", 
   RowBox[{"\"\<qq\>\"", ",", "1", ",", "lucaBasis", ",", "tryMat"}], "]"}], "//",
   "Chop"}]], "Code",
 CellChangeTimes->{{3.617201067733345*^9, 3.6172011216772127`*^9}, {
   3.6172012149297266`*^9, 3.6172012307352047`*^9}, {3.6172021068579617`*^9, 
   3.6172021091682625`*^9}, {3.6172022158261304`*^9, 
   3.6172022172263126`*^9}, {3.6172034996854887`*^9, 
   3.6172035121956134`*^9}, {3.617203700695508*^9, 3.61720370290553*^9}, 
   3.617203851933243*^9, {3.617203909876404*^9, 3.6172039107864227`*^9}, {
   3.6172040074823604`*^9, 3.617204029632804*^9}, {3.6172042512060375`*^9, 
   3.6172042623561487`*^9}, {3.6172044197177343`*^9, 
   3.6172044461779985`*^9}, {3.617206096187196*^9, 3.6172060970371876`*^9}, {
   3.617206291613243*^9, 3.617206319636963*^9}, {3.617206658953379*^9, 
   3.617206676763379*^9}},
 CellLabel->"In[37]:=",ExpressionUUID->"d98fa5e6-ac63-430f-b097-1406b826ef5b"],

Cell[BoxData[
 RowBox[{"doDrv", "[", 
  RowBox[{"\<\"qq\"\>", ",", "1", ",", 
   RowBox[{"GenerateBasis", "[", 
    RowBox[{"stateVar", ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.16`"}], ",", "0.16`"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.5`"}], ",", "0.5`"}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"2", ",", "2"}], "}"}], ",", "theShock", ",", 
     RowBox[{"{", "0", "}"}], ",", 
     RowBox[{"{", "0.02`", "}"}], ",", 
     RowBox[{"{", "5", "}"}], ",", 
     RowBox[{"{", "1", "}"}], ",", "nonStateVar"}], "]"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`",
        ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`",
        ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`",
        ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`"}], "}"}]}], "}"}]}], "]"}]], "Output",
 CellChangeTimes->{
  3.617201279737127*^9, 3.617202109478303*^9, 3.6172022178263903`*^9, 
   3.6172035130256214`*^9, 3.6172035664281588`*^9, {3.6172036964454656`*^9, 
   3.617203703415535*^9}, {3.617203836472934*^9, 3.6172038594853964`*^9}, {
   3.6172039015862384`*^9, 3.61720391219645*^9}, {3.6172040131124735`*^9, 
   3.6172040302828145`*^9}, {3.6172042530360556`*^9, 3.617204263416159*^9}, 
   3.6172044480980177`*^9, {3.6172060929072285`*^9, 3.6172060977771797`*^9}, {
   3.6172062859132996`*^9, 3.6172063202369576`*^9}, {3.617206660203379*^9, 
   3.617206677423379*^9}, 3.6172078415125833`*^9, 3.617214788863548*^9, {
   3.6172148652655478`*^9, 3.617214871465561*^9}, 3.6172155655475454`*^9, 
   3.617215751337414*^9, {3.6172161309153895`*^9, 3.617216136277176*^9}, {
   3.6172164190192685`*^9, 3.6172164250812683`*^9}, 3.6172184279466143`*^9, {
   3.617218570481614*^9, 3.617218575651614*^9}, 3.6172191783267384`*^9, 
   3.617219405418017*^9, {3.617378361655325*^9, 3.617378375683461*^9}, 
   3.6173811829325237`*^9, 3.617382224933282*^9, 3.6173840064022703`*^9, 
   3.617384117100958*^9, 3.6173843964651003`*^9, {3.893897031153212*^9, 
   3.89389703174184*^9}},
 CellLabel->"Out[37]=",ExpressionUUID->"7215673f-6482-49ae-bc96-9ab5cc861f8c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"doVal", "[", 
  RowBox[{"\"\<rr\>\"", ",", "1", ",", "lucaBasis", ",", "tryMat"}], 
  "]"}]], "Code",
 CellChangeTimes->{{3.617201067733345*^9, 3.6172011216772127`*^9}, {
   3.6172012149297266`*^9, 3.6172012307352047`*^9}, {3.6172013038488145`*^9, 
   3.6172013063789916`*^9}, 3.617201819127837*^9, {3.617201872045823*^9, 
   3.6172018749268026`*^9}, {3.6172021603269143`*^9, 
   3.6172021606969624`*^9}, {3.617202527223632*^9, 3.6172025333139973`*^9}, {
   3.6172048159369307`*^9, 3.6172048327285957`*^9}, 3.6172058707195926`*^9, {
   3.617205970974588*^9, 3.617205980804293*^9}, {3.6172060571260047`*^9, 
   3.6172060579159813`*^9}, {3.6172061718684397`*^9, 3.617206215152007*^9}},
 CellLabel->"In[38]:=",ExpressionUUID->"72813d43-124a-4653-9dfd-66bbc9cb5fd3"],

Cell[BoxData[
 RowBox[{"doVal", "[", 
  RowBox[{"\<\"rr\"\>", ",", "1", ",", 
   RowBox[{"GenerateBasis", "[", 
    RowBox[{"stateVar", ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.16`"}], ",", "0.16`"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.5`"}], ",", "0.5`"}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"2", ",", "2"}], "}"}], ",", "theShock", ",", 
     RowBox[{"{", "0", "}"}], ",", 
     RowBox[{"{", "0.02`", "}"}], ",", 
     RowBox[{"{", "5", "}"}], ",", 
     RowBox[{"{", "1", "}"}], ",", "nonStateVar"}], "]"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`",
        ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`",
        ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`",
        ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`"}], "}"}]}], "}"}]}], "]"}]], "Output",
 CellChangeTimes->{{3.617201279737127*^9, 3.617201307029037*^9}, 
   3.61720182251899*^9, 3.6172018754769897`*^9, 3.617202161717095*^9, {
   3.617204821808814*^9, 3.617204833298584*^9}, 3.6172058713295746`*^9, {
   3.617205973044526*^9, 3.617205981404275*^9}, {3.6172060488362536`*^9, 
   3.6172060588259535`*^9}, {3.617206168308475*^9, 3.6172062160319986`*^9}, 
   3.6172078417825775`*^9, 3.6172147892935476`*^9, {3.6172148658455477`*^9, 
   3.617214871845565*^9}, 3.617215565957549*^9, {3.617216130995386*^9, 
   3.617216136357173*^9}, {3.6172164190492687`*^9, 3.6172164251012683`*^9}, 
   3.6172184279566145`*^9, {3.6172185705116143`*^9, 3.6172185757016144`*^9}, 
   3.617219178346738*^9, 3.617219405438017*^9, {3.617378361666325*^9, 
   3.617378375917364*^9}, 3.61738118302182*^9, 3.617382225040654*^9, 
   3.617384006576522*^9, 3.617384117205304*^9, 3.617384396585144*^9, {
   3.89389703116847*^9, 3.89389703181493*^9}},
 CellLabel->"Out[38]=",ExpressionUUID->"2361aaf2-2529-4bb5-a7e3-e18576de8f92"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"doDrv", "[", 
   RowBox[{"\"\<rr\>\"", ",", "1", ",", "lucaBasis", ",", "tryMat"}], "]"}], "//",
   "Chop"}]], "Code",
 CellChangeTimes->{{3.617201067733345*^9, 3.6172011216772127`*^9}, {
   3.6172012149297266`*^9, 3.6172012307352047`*^9}, {3.6172021068579617`*^9, 
   3.6172021091682625`*^9}, {3.6172022158261304`*^9, 
   3.6172022172263126`*^9}, {3.6172034996854887`*^9, 
   3.6172035121956134`*^9}, {3.617203700695508*^9, 3.61720370290553*^9}, 
   3.617203851933243*^9, {3.617203909876404*^9, 3.6172039107864227`*^9}, {
   3.6172040074823604`*^9, 3.617204029632804*^9}, {3.6172042512060375`*^9, 
   3.6172042623561487`*^9}, {3.6172044197177343`*^9, 
   3.6172044461779985`*^9}, {3.617204657552129*^9, 3.61720465867214*^9}},
 CellLabel->"In[39]:=",ExpressionUUID->"0fc29599-2e6c-44ad-99bd-0761d5925ab9"],

Cell[BoxData[
 RowBox[{"doDrv", "[", 
  RowBox[{"\<\"rr\"\>", ",", "1", ",", 
   RowBox[{"GenerateBasis", "[", 
    RowBox[{"stateVar", ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.16`"}], ",", "0.16`"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.5`"}], ",", "0.5`"}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"2", ",", "2"}], "}"}], ",", "theShock", ",", 
     RowBox[{"{", "0", "}"}], ",", 
     RowBox[{"{", "0.02`", "}"}], ",", 
     RowBox[{"{", "5", "}"}], ",", 
     RowBox[{"{", "1", "}"}], ",", "nonStateVar"}], "]"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`",
        ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`",
        ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`",
        ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`"}], "}"}]}], "}"}]}], "]"}]], "Output",
 CellChangeTimes->{
  3.617201279737127*^9, 3.617202109478303*^9, 3.6172022178263903`*^9, 
   3.6172035130256214`*^9, 3.6172035664281588`*^9, {3.6172036964454656`*^9, 
   3.617203703415535*^9}, {3.617203836472934*^9, 3.6172038594853964`*^9}, {
   3.6172039015862384`*^9, 3.61720391219645*^9}, {3.6172040131124735`*^9, 
   3.6172040302828145`*^9}, {3.6172042530360556`*^9, 3.617204263416159*^9}, 
   3.6172044480980177`*^9, 3.6172046595321484`*^9, 3.6172063749164104`*^9, 
   3.6172078418225765`*^9, 3.617214789323548*^9, {3.617214865865548*^9, 
   3.617214871875565*^9}, 3.61721556598755*^9, {3.6172161310153856`*^9, 
   3.617216136397171*^9}, {3.6172164190892687`*^9, 3.6172164251412687`*^9}, 
   3.6172184279766145`*^9, {3.6172185705316143`*^9, 3.6172185757516146`*^9}, 
   3.617219178386739*^9, 3.6172194054580173`*^9, {3.6173783617398043`*^9, 
   3.6173783760651073`*^9}, 3.6173811831370897`*^9, 3.617382225174642*^9, 
   3.61738400673145*^9, 3.617384117302033*^9, 3.6173843967062073`*^9, {
   3.8938970311850853`*^9, 3.893897031843108*^9}},
 CellLabel->"Out[39]=",ExpressionUUID->"c818f37d-ee53-4a9a-99b7-710014e2f794"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"doNumDrv", "[", 
  RowBox[{"\"\<rr\>\"", ",", "0", ",", "lucaBasis", ",", "tryMat", ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "3"}], "}"}], ",", "0.01"}], "]"}]], "Code",
 CellChangeTimes->{{3.617201067733345*^9, 3.6172011216772127`*^9}, {
  3.6172012149297266`*^9, 3.6172012307352047`*^9}, {3.6172013038488145`*^9, 
  3.6172013063789916`*^9}, {3.6172013788160625`*^9, 3.6172013940871315`*^9}, {
  3.617201726890482*^9, 3.617201772467975*^9}, {3.61720217029821*^9, 
  3.6172021714683623`*^9}, {3.6172067148777466`*^9, 3.6172067569901705`*^9}, {
  3.617215681114709*^9, 3.6172156898247957`*^9}},
 CellLabel->"In[40]:=",ExpressionUUID->"08e505ce-7fdd-4dc8-ab4e-f527c155b176"],

Cell[BoxData[
 RowBox[{"doNumDrv", "[", 
  RowBox[{"\<\"rr\"\>", ",", "0", ",", 
   RowBox[{"GenerateBasis", "[", 
    RowBox[{"stateVar", ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.16`"}], ",", "0.16`"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "0.5`"}], ",", "0.5`"}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"2", ",", "2"}], "}"}], ",", "theShock", ",", 
     RowBox[{"{", "0", "}"}], ",", 
     RowBox[{"{", "0.02`", "}"}], ",", 
     RowBox[{"{", "5", "}"}], ",", 
     RowBox[{"{", "1", "}"}], ",", "nonStateVar"}], "]"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`",
        ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", "0.1`", ",", 
       "0.1`", ",", "0.1`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`",
        ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", "0.2`", ",", 
       "0.2`", ",", "0.2`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`",
        ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", "0.3`", ",", 
       "0.3`", ",", "0.3`"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "3"}], "}"}], ",", "0.01`"}], "]"}]], "Output",
 CellChangeTimes->{
  3.6172017032724547`*^9, 3.617201773798427*^9, 3.617201920794394*^9, 
   3.617202065322563*^9, 3.6172021721284485`*^9, {3.617206716297761*^9, 
   3.617206757610177*^9}, 3.6172078420525723`*^9, 3.6172147895035477`*^9, {
   3.6172148660755477`*^9, 3.6172148721355677`*^9}, 3.617215566217552*^9, 
   3.617215610657996*^9, 3.617215642722322*^9, {3.6172156849047465`*^9, 
   3.6172156902948003`*^9}, {3.6172161310453844`*^9, 3.617216136527166*^9}, {
   3.617216419149268*^9, 3.6172164251812687`*^9}, 3.6172184280066147`*^9, {
   3.6172185706016145`*^9, 3.6172185757916145`*^9}, 3.6172191784267387`*^9, 
   3.6172194054680176`*^9, {3.617378361815249*^9, 3.617378376234291*^9}, 
   3.6173811832873297`*^9, 3.617382225295958*^9, 3.61738400689822*^9, 
   3.617384117410034*^9, 3.617384396837304*^9, {3.893897031201846*^9, 
   3.893897031865827*^9}},
 CellLabel->"Out[40]=",ExpressionUUID->"b60fef58-6747-4a87-ad02-45b0c1a0e1f2"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"lucaBasisNew", "=", 
    RowBox[{"GenerateBasis", "[", 
     RowBox[{"stateVar", ",", 
      RowBox[{"polyRange", "//.", "lucaSubs"}], ",", "initPower", ",", 
      "theShock", ",", 
      RowBox[{"theMean", "//.", "lucaSubs"}], ",", 
      RowBox[{
       RowBox[{"{", "sigma$u", "}"}], "//.", "lucaSubs"}], ",", 
      RowBox[{"integOrder", "//.", "lucaSubs"}], ",", "shockPower", ",", 
      "nonStateVar"}], "]"}]}], ";"}], "\n"}]], "Input",
 CellChangeTimes->{{3.6172164381312685`*^9, 3.6172164381312685`*^9}, {
  3.6172164775912685`*^9, 3.6172164783112683`*^9}, {3.617381162016733*^9, 
  3.617381164190126*^9}},
 CellLabel->"In[41]:=",ExpressionUUID->"bf8fe326-5ea0-4ff4-b190-f473913fac3f"],

Cell[CellGroupData[{

Cell[BoxData["lucaBasisNew"], "Input",
 CellChangeTimes->{{3.6172192032469873`*^9, 3.6172192220971756`*^9}},
 CellLabel->"In[42]:=",ExpressionUUID->"d3d1886b-e864-4181-ae4e-9dab58504caa"],

Cell[BoxData[
 RowBox[{"GenerateBasis", "[", 
  RowBox[{"stateVar", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"-", "0.16`"}], ",", "0.16`"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"-", "0.5`"}], ",", "0.5`"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "2"}], "}"}], ",", "theShock", ",", 
   RowBox[{"{", "0", "}"}], ",", 
   RowBox[{"{", "0.02`", "}"}], ",", 
   RowBox[{"{", "5", "}"}], ",", 
   RowBox[{"{", "1", "}"}], ",", "nonStateVar"}], "]"}]], "Output",
 CellChangeTimes->{3.6172192272072268`*^9, 3.617378376754467*^9, 
  3.617381183637693*^9, 3.617382225581698*^9, 3.6173840072587442`*^9, 
  3.6173843971091022`*^9, 3.8938970318934307`*^9},
 CellLabel->"Out[42]=",ExpressionUUID->"1b0919cc-9280-4e63-956d-14fb447b8210"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Get", "[", "\"\<lucaDebugDrv.mth\>\"", "]"}]], "Input",
 CellChangeTimes->{{3.617379474428351*^9, 3.6173794920666523`*^9}},
 CellLabel->"In[43]:=",ExpressionUUID->"856dca03-8032-4b29-b30b-0892461889f0"],

Cell[BoxData[
 TemplateBox[{
  "Set", "shape", 
   "\"Lists \\!\\(\\*RowBox[{\\\"{\\\", RowBox[{RowBox[{\\\"{\\\", RowBox[{\\\
\"stateVar\\\", \\\",\\\", \\\"nonStateVar\\\", \\\",\\\", \
\\\"theShock\\\"}], \\\"}\\\"}], \\\",\\\", \\\"modEqns\\\"}], \\\"}\\\"}]\\) \
and \\!\\(\\*RowBox[{\\\"GenerateModelCode\\\", \\\"[\\\", \\\"lucaMod\\\", \
\\\"]\\\"}]\\) are not the same shape.\"", 2, 43, 4, 26387422237331852744, 
   "Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellChangeTimes->{3.6173843981790047`*^9, 3.893897031988141*^9},
 CellLabel->
  "During evaluation of \
In[43]:=",ExpressionUUID->"9007619c-41a4-40d6-93dc-63383b48da41"],

Cell[BoxData[
 TemplateBox[{
  "Splice", "argx", 
   "\"\\!\\(\\*RowBox[{\\\"Splice\\\"}]\\) called with \\!\\(\\*RowBox[{\\\"3\
\\\"}]\\) arguments; 1 argument is expected.\"", 2, 43, 5, 
   26387422237331852744, "Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellChangeTimes->{3.6173843981790047`*^9, 3.893897032001466*^9},
 CellLabel->
  "During evaluation of \
In[43]:=",ExpressionUUID->"e3e4bc0a-a3b3-4177-bfb6-aa816db0e81f"],

Cell[BoxData[
 RowBox[{"Splice", "[", 
  RowBox[{"\<\"modelDoEqnsCalcs.mtex\"\>", ",", "\<\"luca.tex\"\>", ",", 
   RowBox[{"PageWidth", "\[Rule]", "\[Infinity]"}]}], "]"}]], "Output",
 CellChangeTimes->{3.61737949923201*^9, 3.617381186614153*^9, 
  3.6173822311867113`*^9, 3.617384012291444*^9, 3.617384402844891*^9, 
  3.893897032009487*^9},
 CellLabel->"Out[43]=",ExpressionUUID->"7bddc97c-1d36-402b-8231-230f244c0969"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
},
WindowSize->{783, 878},
WindowMargins->{{621, Automatic}, {Automatic, 242}},
PrintingCopies->1,
PrintingPageRange->{Automatic, Automatic},
PrintingOptions->{"PaperOrientation"->"Portrait",
"PaperSize"->{Automatic, Automatic},
"PostScriptOutputFile"->""},
FrontEndVersion->"12.3 for Linux x86 (64-bit) (May 11, 2021)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"b69ea5e8-71ce-4fc6-805b-a20e261b8116"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[579, 22, 162, 3, 98, "Title",ExpressionUUID->"eab0a283-689f-4ffc-aa2c-4cf6556ff19c"],
Cell[744, 27, 162, 3, 31, "Author",ExpressionUUID->"bf4025e3-eaa9-4320-8119-7b6a6b36ccab"],
Cell[CellGroupData[{
Cell[931, 34, 260, 4, 67, "Section",ExpressionUUID->"cb61628e-9d45-4cfb-bfe8-f155fd4955ce"],
Cell[1194, 40, 822, 20, 113, "Code",ExpressionUUID->"12c5d088-c221-4fef-957b-e65e84f088aa"],
Cell[CellGroupData[{
Cell[2041, 64, 4613, 124, 471, "Input",ExpressionUUID->"3f1b1c12-4b12-424a-acdc-4e24f20fe993"],
Cell[6657, 190, 1226, 35, 57, "Output",ExpressionUUID->"44218c3c-fee3-451a-ba07-7d11c1f540c5"],
Cell[7886, 227, 1370, 38, 79, "Output",ExpressionUUID->"ab0bac9a-a483-49af-ae17-02e04a9a50ff"],
Cell[9259, 267, 622, 13, 28, "Message",ExpressionUUID->"bc788afa-7367-469d-aca0-286f78c69bae"],
Cell[9884, 282, 478, 9, 34, "Output",ExpressionUUID->"9e446776-1e67-414c-95b5-73fec99b0047"]
}, Open  ]],
Cell[CellGroupData[{
Cell[10399, 296, 185, 3, 30, "Input",ExpressionUUID->"0abc5884-09ae-46db-a778-1894bc6b3df6"],
Cell[10587, 301, 277, 6, 34, "Output",ExpressionUUID->"0bbcf130-05d4-417e-bb7c-3ee7d2bf1ec9"]
}, Open  ]],
Cell[10879, 310, 808, 17, 119, "Input",ExpressionUUID->"2d866354-0db9-4ce8-a2f5-a27a9ae8079a"],
Cell[11690, 329, 995, 29, 97, "Input",ExpressionUUID->"d414e472-a84b-4016-8bf0-bde58f5c2064"],
Cell[CellGroupData[{
Cell[12710, 362, 1313, 29, 119, "Input",ExpressionUUID->"5ccbe530-c384-48bb-a2a0-eb3e1b859fe8"],
Cell[14026, 393, 618, 14, 61, "Output",ExpressionUUID->"f2ef6245-5ba0-4f26-a9bb-3bcaad5c13ab"]
}, Open  ]],
Cell[CellGroupData[{
Cell[14681, 412, 213, 3, 30, "Input",ExpressionUUID->"1aa5df00-228f-4fff-af64-184a485ec566"],
Cell[14897, 417, 241, 5, 34, "Output",ExpressionUUID->"d6561eeb-fafb-41e3-ad1f-c8c2c7e280a0"]
}, Open  ]],
Cell[CellGroupData[{
Cell[15175, 427, 276, 5, 53, "Input",ExpressionUUID->"fd98c031-59f1-4dbf-9a11-76b5e9502810"],
Cell[15454, 434, 1370, 35, 106, "Output",ExpressionUUID->"a1c4c9de-1b2f-4a91-aba4-1d0710654a58"]
}, Open  ]],
Cell[CellGroupData[{
Cell[16861, 474, 281, 5, 36, "Code",ExpressionUUID->"66d2f11d-c105-4cd9-b6bd-d7d6f917ac7b",
 InitializationCell->False],
Cell[17145, 481, 644, 13, 28, "Message",ExpressionUUID->"d2e34052-dc05-44cf-8707-beeb12d9c104"],
Cell[17792, 496, 433, 10, 28, "Message",ExpressionUUID->"1eea8f06-3f78-4e1f-a2dd-303f2d472942"],
Cell[18228, 508, 421, 7, 34, "Output",ExpressionUUID->"1c5583d5-80f2-433e-85bf-fe7ef763f0ed"]
}, Open  ]],
Cell[CellGroupData[{
Cell[18686, 520, 396, 7, 52, "Code",ExpressionUUID->"7e9cc883-c0bd-48b4-a12c-ba9329d51185"],
Cell[19085, 529, 2388, 50, 145, "Output",ExpressionUUID->"58833243-d324-4ff7-8391-1d6950f25b0d"]
}, Open  ]],
Cell[21488, 582, 220, 4, 31, "Text",ExpressionUUID->"cbdc1bc0-60ba-432e-9163-200c118e1034"],
Cell[CellGroupData[{
Cell[21733, 590, 722, 13, 52, "Code",ExpressionUUID->"5bb1ffc3-c355-4280-a71b-943031f4bdb4"],
Cell[22458, 605, 2626, 54, 145, "Output",ExpressionUUID->"591e2f5e-deda-4742-99c0-08693a3a1a0f"]
}, Open  ]],
Cell[CellGroupData[{
Cell[25121, 664, 757, 14, 52, "Code",ExpressionUUID->"b82fb38f-7666-40fe-a553-58b9129dc686"],
Cell[25881, 680, 2658, 54, 145, "Output",ExpressionUUID->"56defa51-fbe7-4e51-a1fa-b3d1aa628eb4"]
}, Open  ]],
Cell[CellGroupData[{
Cell[28576, 739, 313, 6, 30, "Input",ExpressionUUID->"0eed1d43-a8fa-4ad7-ab7a-e87d7c80747d"],
Cell[28892, 747, 2150, 47, 145, "Output",ExpressionUUID->"cbf95c4e-f97f-45e0-8a1d-8701805ce373"]
}, Open  ]],
Cell[CellGroupData[{
Cell[31079, 799, 763, 14, 52, "Code",ExpressionUUID->"2e121b41-cafb-458f-b68f-c363a991836b"],
Cell[31845, 815, 2686, 54, 145, "Output",ExpressionUUID->"7b75666c-3014-4911-ad35-9a98e812be7c"]
}, Open  ]],
Cell[CellGroupData[{
Cell[34568, 874, 911, 15, 52, "Code",ExpressionUUID->"bdfea2ee-3757-4690-b5af-b760dd64ed93"],
Cell[35482, 891, 2157, 47, 145, "Output",ExpressionUUID->"2794df1f-f24a-4ba1-a07b-5f6390ed41c7"]
}, Open  ]],
Cell[CellGroupData[{
Cell[37676, 943, 943, 16, 52, "Code",ExpressionUUID->"d98fa5e6-ac63-430f-b097-1406b826ef5b"],
Cell[38622, 961, 2866, 56, 145, "Output",ExpressionUUID->"7215673f-6482-49ae-bc96-9ab5cc861f8c"]
}, Open  ]],
Cell[CellGroupData[{
Cell[41525, 1022, 786, 12, 52, "Code",ExpressionUUID->"72813d43-124a-4653-9dfd-66bbc9cb5fd3"],
Cell[42314, 1036, 2621, 52, 145, "Output",ExpressionUUID->"2361aaf2-2529-4bb5-a7e3-e18576de8f92"]
}, Open  ]],
Cell[CellGroupData[{
Cell[44972, 1093, 840, 14, 52, "Code",ExpressionUUID->"0fc29599-2e6c-44ad-99bd-0761d5925ab9"],
Cell[45815, 1109, 2741, 54, 145, "Output",ExpressionUUID->"c818f37d-ee53-4a9a-99b7-710014e2f794"]
}, Open  ]],
Cell[CellGroupData[{
Cell[48593, 1168, 700, 11, 52, "Code",ExpressionUUID->"08e505ce-7fdd-4dc8-ab4e-f527c155b176"],
Cell[49296, 1181, 2633, 54, 145, "Output",ExpressionUUID->"b60fef58-6747-4a87-ad02-45b0c1a0e1f2"]
}, Open  ]],
Cell[51944, 1238, 743, 16, 88, "Input",ExpressionUUID->"bf8fe326-5ea0-4ff4-b190-f473913fac3f"],
Cell[CellGroupData[{
Cell[52712, 1258, 187, 2, 30, "Input",ExpressionUUID->"d3d1886b-e864-4181-ae4e-9dab58504caa"],
Cell[52902, 1262, 815, 20, 57, "Output",ExpressionUUID->"1b0919cc-9280-4e63-956d-14fb447b8210"]
}, Open  ]],
Cell[CellGroupData[{
Cell[53754, 1287, 226, 3, 30, "Input",ExpressionUUID->"856dca03-8032-4b29-b30b-0892461889f0"],
Cell[53983, 1292, 646, 13, 28, "Message",ExpressionUUID->"9007619c-41a4-40d6-93dc-63383b48da41"],
Cell[54632, 1307, 435, 10, 28, "Message",ExpressionUUID->"e3e4bc0a-a3b3-4177-bfb6-aa816db0e81f"],
Cell[55070, 1319, 422, 7, 34, "Output",ExpressionUUID->"7bddc97c-1d36-402b-8231-230f244c0969"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}
]
*)

